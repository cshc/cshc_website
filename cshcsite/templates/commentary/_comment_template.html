<script id="comment-form-template" type="text/template">
  <form ng-submit="postComment()" id="update-form" name="postCommentForm">
    <div class="row update-form-row">
      <div id="user-options" class="span12">
        <p ng-hide="user"><a href="/accounts/login/?next=/matches/{{ match_id }}/">Login</a> to post live comments on this match.</p>
        <p ng-hide="!user || scorer">There is no-one currently keeping score.<label class="pull-right btn btn-primary">I'll keep score</label></p>
        <p ng-hide="!user || !scorer || (user.id == scorer.id)"><a href="/members/{{ scorer.id }}/">{{ scorer.name }}</a> is keeping score.
          <p ng-hide="!user || !scorer || (user.id != scorer.id)">You are keeping score.<label class="pull-right btn btn-primary">Stop keeping score</label></p>
        </div>
      </div>
      <div class="row update-form-row">
        <div class="span12">
          <p class="error-msg" ng-hide="!error">{{ error }}</p>
        </div>
      </div>
      <div id="comment-options" class="row update-form-row">
        <div class="span2"><label><input type="radio" name="toggle" ng-model="new_comment.comment_type" value="update"><span><i class="icon-edit"></i>&nbsp;Update</span></label></div>
        <div class="span2"><label><input ng-disabled="!i_am_scorer()" type="radio" name="toggle" ng-model="new_comment.comment_type" value="goal_scored"><span><i class="icon-thumbs-up"></i>&nbsp;We scored</span></label></div>
        <div class="span2"><label><input ng-disabled="!i_am_scorer()" type="radio" name="toggle" ng-model="new_comment.comment_type" value="goal_conceded"><span><i class="icon-thumbs-down"></i>&nbsp;They scored</span></label></div>
      </div>
      <div class="row update-form-row">
        <div id="comment-text" class="span10">
          <textarea name="comment" class="" placeholder="What just happened?" ng-model="new_comment"></textarea>
        </div>
        <div id="comment-btns" class="span2">
          <label id="select-photo" class="btn" for="photo-selector">
            <input id="photo-selector" type="file" ng-file-select="onPhotoSelect($files)">
            <i class="icon-camera"></i>
          </label>
          <br/>
          <label id="submit-comment" class="btn btn-success" for="submitter" ng-disabled="!new_comment" >
            <input type="submit" id="submitter" class="btn btn-default">Post
          </label>
        </div>
      </div>
      <div class="row update-form-row">
        <div class="span12">
          <% if
            <img id="img-preview" ng-show="imageSrc" ng-src="{{ imageSrc }}" />
          </div>
        </div>
      </form>
    </script>

    <script id="comment-stats-template" type="text/template">
      <h4>Live match updates
        {% if match.commentary_is_active %}
          <% if(last_update){ %>
            <span class="pull-right" id="last-update">Last update: <%= last_update %></span>
            <% } %>
            {% endif %}
          </h4>
        </script>

        <script id="match-comment-template" type="text/template">
          <div class="media comment-item">
            <div class="pull-left">
              <i class="icon-3x <%= icon %>"></i>
              <div class="comment-time"><%= time %></div>
            </div>
            <div class="media-body">
              <a href="javascript:void(0);" title="Delete" class="close">&times;</a>
              <% if (comment_type != 2) { %>
              <h5 class="media-heading">
                <span <% if (they_scored) { %>class="no-highlight"<% } %>>{{ match.our_team.abbr_name }} <%= our_score %></span>
                -
                <span <% if (we_scored) { %>class="no-highlight"<% } %>><%= opp_score %> {{ match.opp_team.name }}</span>
              </h5>
              <% } %>
              <% if (photo) { %>
              <img class="comment-img" src="{{ MEDIA_URL }}<%= photo %>" />
              <% } %>
              <p><%= comment %></p>
            </div>
          </div>
        </script>